<template>
  <div class="fixed inset-0 bg-white z-[9999] flex items-center justify-center">
    <div class="relative w-full max-w-2xl px-2">
      <svg class="w-full h-auto" viewBox="0 0 1286.56 235.98">
        <path
          ref="logoPath"
          class="logo-path"
          fill="none"
          stroke="#393b54"
          stroke-width="3"
          :d="pathData"
        />
        <circle
          ref="ball"
          class="ball z-10"
          cx="0"
          cy="0"
          r="6"
          fill="#64C898"
        />
      </svg>
    </div>
  </div>
</template>

<script setup>
import { gsap } from 'gsap'
import { MotionPathPlugin } from 'gsap/MotionPathPlugin'

const pathData = "M0 45.26L0 9.47L4.74 9.47L4.74 24.17L23.34 24.17L23.34 9.47L28.08 9.47L28.08 45.26L23.34 45.26L23.34 28.39L4.74 28.39L4.74 45.26L0 45.26ZM53.15 36.91L57.69 37.48Q56.62 41.46 53.71 43.65Q50.81 45.85 46.29 45.85Q40.60 45.85 37.27 42.35Q33.94 38.84 33.94 32.52Q33.94 25.98 37.30 22.36Q40.67 18.75 46.04 18.75Q51.25 18.75 54.54 22.29Q57.84 25.83 57.84 32.25Q57.84 32.64 57.81 33.42L38.48 33.42Q38.72 37.70 40.89 39.97Q43.07 42.24 46.31 42.24Q48.73 42.24 50.44 40.97Q52.15 39.70 53.15 36.91M38.72 29.81L53.20 29.81Q52.91 26.54 51.54 24.90Q49.44 22.36 46.09 22.36Q43.07 22.36 41.00 24.39Q38.94 26.42 38.72 29.81ZM61.50 34.52L61.50 30.10L75 30.10L75 34.52L61.50 34.52ZM80.27 45.26L80.27 9.47L87.40 9.47L95.87 34.81Q97.05 38.35 97.58 40.11Q98.19 38.16 99.49 34.38L108.06 9.47L114.43 9.47L114.43 45.26L109.86 45.26L109.86 15.31L99.46 45.26L95.19 45.26L84.84 14.79L84.84 45.26L80.27 45.26ZM139.26 36.91L143.80 37.48Q142.72 41.46 139.82 43.65Q136.91 45.85 132.40 45.85Q126.71 45.85 123.38 42.35Q120.04 38.84 120.04 32.52Q120.04 25.98 123.41 22.36Q126.78 18.75 132.15 18.75Q137.35 18.75 140.65 22.29Q143.95 25.83 143.95 32.25Q143.95 32.64 143.92 33.42L124.58 33.42Q124.83 37.70 127.00 39.97Q129.17 42.24 132.42 42.24Q134.84 42.24 136.55 40.97Q138.26 39.70 139.26 36.91M124.83 29.81L139.31 29.81Q139.01 26.54 137.65 24.90Q135.55 22.36 132.20 22.36Q129.17 22.36 127.11 24.39Q125.05 26.42 124.83 29.81ZM167.07 36.91L171.61 37.48Q170.53 41.46 167.63 43.65Q164.72 45.85 160.21 45.85Q154.52 45.85 151.18 42.35Q147.85 38.84 147.85 32.52Q147.85 25.98 151.22 22.36Q154.59 18.75 159.96 18.75Q165.16 18.75 168.46 22.29Q171.75 25.83 171.75 32.25Q171.75 32.64 171.73 33.42L152.39 33.42Q152.64 37.70 154.81 39.97Q156.98 42.24 160.23 42.24Q162.65 42.24 164.36 40.97Q166.06 39.70 167.07 36.91M152.64 29.81L167.11 29.81Q166.82 26.54 165.45 24.90Q163.35 22.36 160.01 22.36Q156.98 22.36 154.92 24.39Q152.86 26.42 152.64 29.81ZM177.12 45.26L177.12 19.34L181.05 19.34L181.05 22.97Q182.28 21.07 184.30 19.91Q186.33 18.75 188.92 18.75Q191.80 18.75 193.64 19.95Q195.48 21.14 196.24 23.29Q199.32 18.75 204.25 18.75Q208.11 18.75 210.18 20.89Q212.26 23.02 212.26 27.47L212.26 45.26L207.89 45.26L207.89 28.93Q207.89 26.29 207.46 25.13Q207.03 23.97 205.91 23.27Q204.79 22.56 203.27 22.56Q200.54 22.56 198.73 24.38Q196.92 26.20 196.92 30.20L196.92 45.26L192.53 45.26L192.53 28.42Q192.53 25.49 191.46 24.02Q190.38 22.56 187.94 22.56Q186.08 22.56 184.51 23.54Q182.93 24.51 182.23 26.39Q181.52 28.27 181.52 31.81L181.52 45.26L177.12 45.26ZM249.98 31.23L249.98 27.03L265.14 27.00L265.14 40.28Q261.65 43.07 257.93 44.47Q254.22 45.87 250.32 45.87Q245.04 45.87 240.73 43.62Q236.43 41.36 234.23 37.08Q232.03 32.81 232.03 27.54Q232.03 22.31 234.22 17.79Q236.40 13.26 240.50 11.06Q244.60 8.86 249.95 8.86Q253.83 8.86 256.97 10.12Q260.11 11.38 261.89 13.62Q263.67 15.87 264.60 19.48L260.33 20.65Q259.52 17.92 258.33 16.36Q257.13 14.79 254.91 13.85Q252.69 12.92 249.98 12.92Q246.73 12.92 244.36 13.90Q241.99 14.89 240.54 16.50Q239.09 18.12 238.28 20.04Q236.91 23.36 236.91 27.25Q236.91 32.03 238.56 35.25Q240.21 38.48 243.36 40.04Q246.51 41.60 250.05 41.60Q253.13 41.60 256.05 40.42Q258.98 39.23 260.50 37.89L260.50 31.23L249.98 31.23ZM271.51 45.26L271.51 19.34L275.46 19.34L275.46 23.27Q276.98 20.51 278.26 19.63Q279.54 18.75 281.08 18.75Q283.30 18.75 285.60 20.17L284.08 24.24Q282.47 23.29 280.86 23.29Q279.42 23.29 278.27 24.16Q277.12 25.02 276.64 26.56Q275.90 28.91 275.90 31.69L275.90 45.26L271.51 45.26ZM286.57 32.30Q286.57 25.10 290.58 21.63Q293.92 18.75 298.73 18.75Q304.08 18.75 307.47 22.25Q310.86 25.76 310.86 31.93Q310.86 36.94 309.36 39.81Q307.86 42.68 304.99 44.26Q302.12 45.85 298.73 45.85Q293.29 45.85 289.93 42.36Q286.57 38.87 286.57 32.30M291.09 32.30Q291.09 37.28 293.26 39.76Q295.43 42.24 298.73 42.24Q302.00 42.24 304.17 39.75Q306.35 37.26 306.35 32.15Q306.35 27.34 304.16 24.87Q301.98 22.39 298.73 22.39Q295.43 22.39 293.26 24.85Q291.09 27.32 291.09 32.30ZM333.01 45.26L333.01 41.46Q329.98 45.85 324.78 45.85Q322.49 45.85 320.50 44.97Q318.51 44.09 317.54 42.76Q316.58 41.43 316.19 39.50Q315.92 38.21 315.92 35.40L315.92 19.34L320.31 19.34L320.31 33.72Q320.31 37.16 320.58 38.35Q321.00 40.09 322.34 41.08Q323.68 42.07 325.66 42.07Q327.64 42.07 329.37 41.05Q331.10 40.04 331.82 38.29Q332.54 36.55 332.54 33.23L332.54 19.34L336.94 19.34L336.94 45.26L333.01 45.26ZM343.82 55.20L343.82 19.34L347.83 19.34L347.83 22.71Q349.24 20.73 351.03 19.74Q352.81 18.75 355.35 18.75Q358.67 18.75 361.21 20.46Q363.75 22.17 365.04 25.28Q366.33 28.39 366.33 32.10Q366.33 36.08 364.90 39.27Q363.48 42.46 360.75 44.15Q358.03 45.85 355.03 45.85Q352.83 45.85 351.09 44.92Q349.34 43.99 348.22 42.58L348.22 55.20L343.82 55.20M347.80 32.45Q347.80 37.45 349.83 39.84Q351.86 42.24 354.74 42.24Q357.67 42.24 359.75 39.76Q361.84 37.28 361.84 32.08Q361.84 27.12 359.80 24.66Q357.76 22.19 354.93 22.19Q352.12 22.19 349.96 24.82Q347.80 27.44 347.80 32.45Z"

const ball = ref(null)
const logoPath = ref(null)

onMounted(() => {
  gsap.registerPlugin(MotionPathPlugin)

  // Set initial positions
  gsap.set(ball.value, {
    xPercent: -50,
    yPercent: -50,
    transformOrigin: "50% 50%"
  })

  // Create animation timeline
  const timeline = gsap.timeline({ repeat: -1 })

  timeline.to(ball.value, {
    duration: 8,
    ease: "power1.inOut",
    motionPath: {
      path: logoPath.value,
      align: logoPath.value,
      alignOrigin: [0.5, 0.5],
      start: 0,
      end: 1
    }
  })
})

onBeforeUnmount(() => {
  gsap.globalTimeline.clear()
})
</script>

<style scoped>
.logo-path {
  stroke-dasharray: 2500;
  stroke-dashoffset: 2500;
  animation: draw 8s ease-out forwards;
}

@keyframes draw {
  to {
    stroke-dashoffset: 0;
  }
}

.ball {
  filter: drop-shadow(0 0 4px rgba(100, 200, 152, 0.3));
}
</style>